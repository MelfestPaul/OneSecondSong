<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>One Second Song Erweiterung</title>
  <style>
    button { margin: 0.5em; }
    #controls { margin-top: 1em; }
  </style>
</head>
<body>
  <!-- Buttons -->
  <button id="nextSong">Nächstes Lied</button>
  <button id="weiter" disabled>Weiter</button>
  <button id="replay" disabled>Nochmal drücken</button>
  
  <!-- Schieberegler -->
  <div id="controls">
    <label for="durationSlider">Spieldauer (Sekunden): </label>
    <input type="range" id="durationSlider" min="0.125" max="3" step="0.125" value="1">
    <span id="durationDisplay">1 Sekunde</span>
  </div>
  
  <!-- Anzeige für Song-Info -->
  <div id="songInfo"></div>
  
  <script>
    let currentSong = null;
    let duration = parseFloat(document.getElementById("durationSlider").value);
    
    // Update der Anzeige, wenn der Schieberegler bewegt wird
    document.getElementById("durationSlider").addEventListener("input", function() {
      duration = parseFloat(this.value);
      document.getElementById("durationDisplay").innerText = duration + " Sekunde" + (duration > 1 ? "n" : "");
    });
    
    // Funktion, die einen Song auswählt (hier exemplarisch)
    function getNextSong() {
      // Ersetze dies durch deine Logik (z. B. zufällige Auswahl aus einem Array)
      return { title: "Beispiel Song", file: "song.mp3" };
    }
    
    // Funktion zum Abspielen eines Songs
    function playSong(song, playDuration) {
      // Beispiel mit HTML5 Audio:
      let audio = new Audio(song.file);
      audio.play();
      // Stoppt das Abspielen nach playDuration Sekunden
      setTimeout(() => {
        audio.pause();
        audio.currentTime = 0;
      }, playDuration * 1000);
    }
    
    // Klick auf "Nächstes Lied"
    document.getElementById("nextSong").addEventListener("click", function() {
      // Neues Lied auswählen
      currentSong = getNextSong();
      // Lied abspielen, wobei die Dauer über den Slider bestimmt wird
      playSong(currentSong, duration);
      // Deaktiviere "Weiter" und "Nochmal drücken" vorerst, falls kein Song geladen
      document.getElementById("weiter").disabled = false;
      document.getElementById("replay").disabled = false;
      // Zurücksetzen der Song-Info-Anzeige
      document.getElementById("songInfo").innerText = "";
    });
    
    // Klick auf "Weiter" zeigt den Songtitel an
    document.getElementById("weiter").addEventListener("click", function() {
      if (currentSong) {
        document.getElementById("songInfo").innerText = "Jetzt spielt: " + currentSong.title;
      }
    });
    
    // Klick auf "Nochmal drücken" spielt das aktuell geladene Lied erneut für 1 Sekunde ab
    document.getElementById("replay").addEventListener("click", function() {
      if (currentSong) {
        playSong(currentSong, 1);
      }
    });
  </script>
</body>
</html>